<% include layout.ejs%>



<br>

<div data-ng-app="productCategoryModule"
     data-ng-controller="viewProductCategoryController">
    <div class="panel panel-info">
        <div class="panel-heading">

            <h3 class="panel-title"> {{DeckName}}</h3>
        </div>
    </div>

    <div class="container">



        <script type="text/ng-template" id="field_renderer.html">




                    <div ng-show="currentTopic == Category.Topic || Category.Layer == 0">
                        <ul><input type="checkbox" ng-model="checkCat" ng-click="setCurrentTopic(Category.Topic)" ng-checked="currentTopic == Category.Topic && Category.Layer == 0" ng-init="checkCat = false" ng-attr-id="{{getSuperCategory(Category)}}" layer="{{Category.Layer}}"> {{Category.CategoryName}}</ul>
                    </div>

                    <div ng-show="currentTopic == Category.Topic">
                        <ul ng-show="checkCat" ng-repeat="Deck in Category.Decks">
                            <input type="checkbox" ng-model="check" ng-click="addDeck(Deck, Category, check)" ng-init="check = $storage.decks[Deck.Id][0]==1" ng-attr-id="{{getSuperCategory(Category)}}">{{Deck.DeckName}}
                            <input type="checkbox" ng-show="check" ng-model="checkDet" ng-click="addDetails(Deck, checkDet)" ng-checked="$storage.decks[Deck.Id][1]==1" ng-attr-id="{{getSuperCategory(Category)}}">
                            <span ng-show="check"  ng-attr-id="{{getSuperCategory(Category)}}">Details</span>
                        </ul>

                        <ul ng-hide="!$parent.checkCat" ng-repeat="Category in Category.SubCategories" ng-include ="'field_renderer.html'"></ul>
                    </div>











                </ul>
            </div>
        </script>


        <script type="text/ng-template" id="expand.html">


        </script>






        <li ng-repeat="Category in Hierarchy.SubCategories" ng-include="'field_renderer.html'">



            <!--ul><input type="checkbox" ng-model="checkCat" ng-init="checkCat = $storage.Categories[Category.CategoryId] > 0"> {{Category.CategoryName}}</ul>



            <!--input type="checkbox" ng-model="check" ng-click="addDeck(productCategory, check)" ng-checked="false"-->
            <!--ul ng-show="checkCat" ng-repeat="Deck in Category.Decks">

                <input type="checkbox" ng-model="check" ng-click="addDeck(Deck, Category, check)" ng-init="check = $storage.decks[Deck.Id][0]==1"> {{Deck.DeckName}}
                <input type="checkbox" ng-show="check" ng-model="checkDet" ng-click="addDetails(Deck, checkDet)" ng-checked="$storage.decks[Deck.Id][1]==1"> <span ng-show="check">Details</span>
            </ul-->
        </li>




    </div>


    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span> </button>
                    <h4 class="modal-title" id="exampleModalLabel">Are you sure you want to delete this card?</h4>
                </div>
                <div class="modal-body">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger" data-ng-click="deleteCard()">Delete Card</button>
                </div>
                <div class="modal-footer">

                </div>
            </div>
        </div>
    </div>


</div>

</div>


<script src="../../javascripts/app/productCategory/productCategoryService.js"></script>
<script src="../../javascripts/app/productCategory/viewProductCategoryController.js"></script>

<script src="../../javascripts/app/productCategory/requiredFieldValidationService.js"></script>

<script src="../../javascripts/app/productCategory/topicFunctionality.js"></script>

